# IndustryLP for Cities: Skylines速

<p align="center"> <a href="https://dotnet.microsoft.com/download/dotnet-framework/net35"><img alt=".NET Framework" src="https://img.shields.io/badge/.NET%20Framework-v3.5-7014e8"></a> <a href="https://store.steampowered.com/app/255710/Cities_Skylines/"><img alt="Cities: Skyline 1.13.0-f8" src="https://img.shields.io/badge/Game%20Version-1.13.3--f9-00a0ff"></a> <a href="https://github.com/NEKERAFA/CS-IndustryLP/blob/master/LICENSE"><img alt="MIT License" src="https://img.shields.io/github/license/nekerafa/CS-IndustryLP"></a> <a href="https://tree.taiga.io/project/nekerafa-tfm-udc/"><img alt="Taiga project" src="https://img.shields.io/badge/Taiga-brightgreen?logo=data:image/png;base64,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"></a> </p>

<img alt="IndustryLP Workflow" src="https://github.com/NEKERAFA/CS-IndustryLP/workflows/IndustryLP%20Workflow/badge.svg?branch=master"> <a href="https://github.com/NEKERAFA/CS-IndustryLP/releases"><img alt="GitHub latest release" src="https://img.shields.io/github/v/release/NEKERAFA/CS-IndustryLP?include_prereleases"></a> <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=2597556943"><img alt="Steam Workshop" src="https://img.shields.io/badge/Workshop-1.0.3-blue?logo=steam"></a>

An Industrial Estate Generator Mod for the Videogame 'Cities: Skylines速' using Logic Programming (Answer Set Programming).

## Abstract

This project is included, together with [ClingoSharp](https://github.com/NEKERAFA/ClingoSharp), in my final project of my master's degree in computer engineering. The objective is to partially automating the urban planning of industrial parks in a simulation video game by means of automatic reasoning and knowledge representation techniques. For this purpose, a declarative tool governed by rules has been built to generate the framework of the industrial estate and whose output can be used by the city simulator 'Cities: Skylines速'.

## Dependencies

- [.NET Framework 3.5](https://www.microsoft.com/es-es/download/details.aspx?id=21)
- [ClingoSharp](https://github.com/NEKERAFA/ClingoSharp)

*Optional*
- [Ploppable RICO *Revisited*](https://github.com/algernon-A/Ploppable-RICO-Revisited)

## Instalation

You can get the mod in the [Steam Workshop](https://steamcommunity.com/sharedfiles/filedetails/?id=2597556943): https://steamcommunity.com/sharedfiles/filedetails/?id=2597556943.

If you get the game with another service, you can download the lastest zip file in [release](https://github.com/NEKERAFA/CS-IndustryLP/releases) section of this page. You must uncompress the file in ```%User local data folder% / Colossal Order / Cities_Skylines / Addons / Mods```.

In this moment, **IndustryLP only works on Microsoft Windows**. To make it works on another OS, you have to build the [clingo](https://github.com/potassco/clingo) dependency on your system and place it in the folder ```runtimes / os / native```.

## Building

You must have .NET Framework installed on your computer. Download this repo with all submodules and compile the IndustryLP solution.

## How to use

The main UI has been divided into the sections below:

![Tool UI](docs/report/images/tool.png)

1. **Actions**: Define region, modify region and generate.
2. **Main panel** with Distributions, Preferences and Restrictions tabs.
3. **Main tool**
4. **Tool cursor**

For defining a region, you have to hold pressed the primary mouse button in any part of the terrain. If the region has enough size, the selection will have orange color, otherwise the selection will be red and when you released the button, it will be errased.

With a region defined, in **modify region** you can change the size if you hold pressed the primary mouse button in any vertex of the region. To move it you must to do the same in the middle point, and to rotate the area you have to press the secondary mouse button and move the cursor.

![Road distribution](docs/report/images/distributions.png)

Once the region has been made, you must to select any road distribution to tell the generation how to put the industrial buildings. With a distribution selected, you could add building restrictions in any parcel.

If you add a preference, IndustryLP will understand that you want that building to be generated at that given position. On the other hand, if you add a restriction, the mod will understand that you don't want such buildings to be generated in that region.

For remove a restriction, you have to press the secondary mouse button in the building that you want to erase.

When you want to generate solutions, you must to press the **generate** action. A dialog window will be shown. In this dialog you can change the maximun number of solutions that the mod will show (0 returns all the possible solutions).

![Generation options](docs/report/images/dialog.png)

Another editable option is to add new rules in [**ASP Core 2**](https://www.mat.unical.it/aspcomp2013/files/ASP-CORE-2.03b.pdf) format that they will be used in the generation process. For generate the possible solutions we use [clingo](https://github.com/potassco/clingo) tool to compute the *answer sets* of a *logic program*. All the logic program rules are store in ```.lp``` files in [```DomianDefinition / logic_program```](IndustryLP/DomainDefinition/logic_program) folder.

Any new ```.lp``` file will be loaded in the generation process on the fly, so you can test you rules in the **Advanced Edition** text area and then pass to a file to save it in future generations.

Once you press *Generate* button, the main panel will change, adding the following sections:

![Solutions panel](docs/report/images/solutions.png)

1. Current solution index / Number of solutions found.
2. Buttons to change previous / next solution.
3. Build actual solution.

The main solution will be shown in the region selected. When you build a solution, all the roads and buildings will be created in Cities: Skylines速. 

> **NOTE:** If you haven't any mod installed that prevents new building from being removed of the simulation if the area is not zoning with these building type, all the buildings generated will be buldoze because this. For preventing it, my recommendation is to use [Ploppable RICO Revised](https://github.com/algernon-A/Ploppable-RICO-Revisited) or any similar mod.

# License

> MIT License
>
> Copyright (c) 2019 Rafael Alcalde Azpiazu
>
> Permission is hereby granted, free of charge, to any person obtaining a copy
> of this software and associated documentation files (the "Software"), to deal
> in the Software without restriction, including without limitation the rights
> to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
> copies of the Software, and to permit persons to whom the Software is
> furnished to do so, subject to the following conditions:
>
> The above copyright notice and this permission notice shall be included in all
> copies or substantial portions of the Software.
>
> THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
> IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
> FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
> AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
> LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
> OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
> SOFTWARE.